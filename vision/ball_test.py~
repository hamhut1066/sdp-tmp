from tracker import *
from camera import Camera

c = Camera()

frame = c.get_frame()

t = BallTracker('red')


r = RobotTracker('yellow', 3)

while True:
    frame = c.get_frame()
    center = r.our_attacker_coordinates(frame)
    #print center

    orientation = r.getRobotOrientation(frame, 'us', 'attacker')
    #print orientation
    if orientation is None:
        cv2.imshow('frame', frame)
        k = cv2.waitKey(5) & 0xFF
        if k == 27:
            break
        continue
    p, v1 = orientation
    #print p

    frame = cv2.circle(frame, ( int(center[0]), int(center[1])), 20, (0,0,0), 2)
    #print "center: " + str(center)
    x, y = Tracker.transformCoordstoDecartes(center)
    vector1 = (x+v1[0] * 50, y+v1[1] * 50)
    x1, y1 = Tracker.transformCoordstoCV(vector1)
    cv2.line(frame, (int(center[0]),int(center[1])), (int(x1),int(y1)), (0,255,122), 2)
    cv2.imshow('frame', frame)
    k = cv2.waitKey(5) & 0xFF
    if k == 27:
        break

c.close()
cv2.destroyAllWindows()     